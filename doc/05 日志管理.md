
## 概述

无论在应用的开发和运行当中，总会出现各种情况。对特定信息的监控，则能为快速定位问题，带来便利。

特别是在交付上线后，由于用户的设备环境千差万别，总会出现非常多的问题。提供日志的管理，将用户设备的报错情况上传或者截图。对完善应用非常有利。

begonia提供了一个日志的模块`LogManager`，用来管理应用的日志信息。

## 日志分级

按照日志的重要程度，分为四类：

#### 1. 输出

最低的等级，默认为白色和灰色系显示。

用于普通文本信息输出。

```js
Log.trace(/*...*/);
```

#### 2. 信息

稍高的等级，默认用蓝色系表示

用于特殊信息的输出。

```js
Log.info(/*...*/);
```

#### 3. 警告

重要的等级，默认用橙黄色系表示

用户一些警告信息，和不影响用户使用的错误的警告信息。

```js
Log.warn(/*...*/);

```

#### 4. 错误

最重要的等级，默认使用红色系表示

用于错误信息提示，出现此日志，要引起重视，及时查找问题并进行修复。

```js
Log.error(/*...*/);
```

### 输出日志信息

使用，日志对象的`logList`属性(getter方法)，可以获取当前的日志列表数组。

每一个元素是一个日志对象，符合以下接口:

```js
/**
 * 日志单项
 */
interface LogItem{
    
    className:string,   //样式名称
    message:string,     //类型标识，例如info是信息
    detail:string,      //日志详情
    time:string,        //日志产生的时间，yy-mm-dd形式
    
}
```

#### 日志的样式

日志模块，默认只提供日志样式的建议，不提供不限制样式的形式。

每一个日志对象，根据日志分级，提供了对应的日志css样式类名，开发者可以自行实现样式。

类名如下:

```js
const style = {
    l1:'log__txt--normal',
    l2:'log__txt--info',
    l3:'log__txt--error',
    l4:'log__txt--warn',
};
```

实现举例和参考，以下代码均为示例和参考:

wxml:

```html
<!--log.wxml-->
<view class="page__cnt log-page">
  <view class="log-box">
    <view 
      class="log__item {{item.className}}" 
      wx:key="time"
      wx:for="{{logList}}" >
      <view class="item__title">{{item.message}}{{item.time}}</view>
      <view class="item__detail">{{item.detail}}</view>
    </view>
  </view>
</view>
```

wxss:

```css
/* log.wxss */

.log-box{
  width:100%;
}
.log__item{
  margin-bottom:10rpx;
}
.item__title{
  width:100%;
  min-height:40rpx;
  font-size:32rpx;
}
.item__detail{
  width:100%;
  min-height:88rpx;
  font-size:24rpx;
}
.log__txt--info{
  background:rgba(92,157,237,0.5);
}
.log__txt--info>.item__title{
  background:#4a8adb;
}

.log__txt--warn{
  background:rgba(254,208,84,0.5);
}
.log__txt--warn>.item__title{
  background:#f7ba44;
}

.log__txt--error{
  background:rgba(240,84,102,0.5);
}
.log__txt--error>.item__title{
  background:#db4455;
}

.log__txt--normal{
  background:rgba(255,255,255,1);
}
.log__txt--normal>.item__title{
  background:#e7e9ef;
}
```